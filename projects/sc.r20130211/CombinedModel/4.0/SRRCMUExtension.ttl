# baseURI: http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCMUExtension
# imports: http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCoreSCModel

@prefix cmusc: <http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCMUExtension#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sc: <http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCoreSCModel#> .
@prefix sp: <http://spinrdf.org/sp#> .
@prefix spin: <http://spinrdf.org/spin#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCMUExtension>
  rdf:type owl:Ontology ;
  owl:imports <http://www.cmusv.edu/SmartCommunity/CombinedModel/4.0/SRRCoreSCModel> ;
  owl:versionInfo "Created with TopBraid Composer"^^xsd:string ;
.
cmusc:Device
  rdf:type owl:Class ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object cmusc:FireflyDevice ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            rdf:type sp:TriplePath ;
            sp:object "SensorAndrew"^^xsd:string ;
            sp:path [
                rdf:type sp:SeqPath ;
                sp:path1 cmusc:hasAgent ;
                sp:path2 sc:hasLabel ;
              ] ;
            sp:subject spin:_this ;
          ]
        ) ;
    ] ;
  rdfs:subClassOf sc:Device ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom cmusc:DeviceAgent ;
      owl:onProperty cmusc:hasAgent ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom cmusc:DeviceCatalogEntry ;
      owl:onProperty cmusc:hasCatalogEntry ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom sc:Sensor ;
      owl:onProperty sc:hasSensor ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:cardinality "1"^^xsd:nonNegativeInteger ;
      owl:onProperty cmusc:hasCatalogEntry ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:cardinality "1"^^xsd:nonNegativeInteger ;
      owl:onProperty cmusc:uri ;
    ] ;
.
cmusc:DeviceAgent
  rdf:type owl:Class ;
  rdfs:subClassOf sc:Resource ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom sc:Event ;
      owl:onProperty sc:createdAt ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom xsd:string ;
      owl:onProperty cmusc:hasNetworkAddress ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom xsd:string ;
      owl:onProperty cmusc:metadataJson ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom xsd:string ;
      owl:onProperty cmusc:uri ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom xsd:string ;
      owl:onProperty sc:updatedAt ;
    ] ;
.
cmusc:DeviceCatalogEntry
  rdf:type owl:Class ;
  rdfs:label ""^^xsd:string ;
  rdfs:subClassOf sc:Resource ;
.
cmusc:FireflyDevice
  rdf:type owl:Class ;
  rdfs:subClassOf cmusc:Device ;
  owl:equivalentClass [
      rdf:type owl:Class ;
      owl:intersectionOf (
          cmusc:Device
          [
            rdf:type owl:Restriction ;
            owl:onProperty cmusc:hasAgent ;
            owl:someValuesFrom [
                rdf:type owl:Class ;
                owl:intersectionOf (
                    cmusc:DeviceAgent
                    [
                      rdf:type owl:Restriction ;
                      owl:hasValue "SensorAndrew"^^xsd:string ;
                      owl:onProperty sc:hasLabel ;
                    ]
                  ) ;
              ] ;
          ]
        ) ;
    ] ;
.
cmusc:SensorCatalogEntry
  rdf:type owl:Class ;
  rdfs:label ""^^xsd:string ;
  rdfs:subClassOf sc:Resource ;
.
cmusc:hasAgent
  rdf:type rdf:Property ;
.
cmusc:hasCatalogEntry
  rdf:type owl:ObjectProperty ;
  rdfs:label ""^^xsd:string ;
.
cmusc:hasDeviceTypeName
  rdf:type owl:DatatypeProperty ;
  rdfs:label ""^^xsd:string ;
.
cmusc:hasNetworkAddress
  rdf:type rdf:Property ;
.
cmusc:metadataJson
  rdf:type rdf:Property ;
.
sc:Sensor
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:Accelerometer ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            rdf:type sp:Union ;
            sp:elements (
                (
                  [
                    sp:object "acc_x"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
                (
                  [
                    sp:object "acc_y"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
                (
                  [
                    sp:object "acc_z"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
              ) ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:Accelerometer ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            sp:object "motion"^^xsd:string ;
            sp:predicate sc:shortName ;
            sp:subject spin:_this ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:AudioSensor ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            rdf:type sp:Union ;
            sp:elements (
                (
                  [
                    sp:object "audio_p2p"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
                (
                  [
                    sp:object "sound_level"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
              ) ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:HumiditySensor ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            sp:object "humidity"^^xsd:string ;
            sp:predicate sc:shortName ;
            sp:subject spin:_this ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:LightSensor ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            sp:object "light"^^xsd:string ;
            sp:predicate sc:shortName ;
            sp:subject spin:_this ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:PressureSensor ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            sp:object "pressure"^^xsd:string ;
            sp:predicate sc:shortName ;
            sp:subject spin:_this ;
          ]
        ) ;
    ] ;
  spin:rule [
      rdf:type sp:Construct ;
      sp:templates (
          [
            sp:object sc:TemperatureSensor ;
            sp:predicate rdf:type ;
            sp:subject spin:_this ;
          ]
        ) ;
      sp:where (
          [
            rdf:type sp:Union ;
            sp:elements (
                (
                  [
                    sp:object "temp"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
                (
                  [
                    sp:object "temperature"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
                (
                  [
                    sp:object "digital_temp"^^xsd:string ;
                    sp:predicate sc:shortName ;
                    sp:subject spin:_this ;
                  ]
                )
              ) ;
          ]
        ) ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom cmusc:SensorCatalogEntry ;
      owl:onProperty cmusc:hasCatalogEntry ;
    ] ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:cardinality "1"^^xsd:nonNegativeInteger ;
      owl:onProperty cmusc:hasCatalogEntry ;
    ] ;
.
